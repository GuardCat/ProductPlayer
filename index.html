<script type="text/javascript">

	document.write(`
<!doctype HTML>
<html>
<head>
	<link rel="stylesheet" id="mainstyle"></link>
	<link rel="stylesheet" id="cardstyle"></link>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="utf-8">
</head>

<body>

	
<div class="cardContainer">
	<input type="search" id="nameSearch">
	<div class="clearer" onclick="document.querySelector('#nameSearch').value='';filterByName( );">✖</div>
	<div class="breaker"></div>
</div>

<script type="text/javascript" id="observer"	></script>
<script type="text/javascript" id="base"		></script>
<script type="text/javascript" id="cardmaker"	></script>
<script type="text/javascript" id="loadlist" src="https://webtutor.otpbank.ru/download_file.html?file_id=6688621698217240862"></script>


<script type="text/javascript">

const 
	data = {
		forLoad: {
			observer:	{attribute:	"src",	value:	"https://webtutor.otpbank.ru/download_file.html?file_id=6688620357795999002"},
			cardmaker:	{attribute: "src",	value:	"https://webtutor.otpbank.ru/download_file.html?file_id=6688619456793097366"},
			base:		{attribute:	"src",	value:	"https://webtutor.otpbank.ru/download_file.html?file_id=6688620003131661277"},
			mainstyle:	{attribute:	"href",	value:	"https://webtutor.otpbank.ru/download_file.html?file_id=6688622910443958105"},
			cardstyle:	{attribute:	"href",	value:	"https://webtutor.otpbank.ru/download_file.html?file_id=6688622446267867876"}
		}
	},
	
	filterByName = ( ( ) => {
		let oldValue
		return ( ) => {
			let input = document.querySelector("#nameSearch"), filtered;
			if (oldValue === input.value) return false;
			//if (input.value.length < 3) return false;

			filtered = base.desc.filter( (e) => {
				let r = new RegExp( ("" + input.value).toLowerCase( ) );
				return !r.test(e.name.toLowerCase( ));
			} );

			show(base.desc);
			hide(filtered);
		}
	} ) ( )
;
	
function hide(arr) {
	arr.forEach( (e) => e.html.hide( ) );
}
	
function show(arr) {
	arr.forEach( (e) => e.html.show( ) );	
}
	

function director( ) {
	base = JSON.parse( decodeURIComponent(base) ); /* определение глобальной переменной base зашито в jsonp */
	
	base.desc.forEach( ( e, i ) => {
		document.querySelector(".cardContainer").appendChild( (new SACard(e, i, base)).html );
	} );
	
	document.querySelector("#nameSearch").addEventListener("keyup", filterByName, false);
	
}


new LoadList(data.forLoad, director);


</script>

</body>
</html>
`)
